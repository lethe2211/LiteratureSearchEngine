// Generated by CoffeeScript 1.8.0
(function() {
  var getUrlVars, ready;

  ready = function() {
    var end_num, exports, isExperimentalMode, json, params, start_num, url;
    exports = this;
    params = getUrlVars();
    start_num = params['start_num'] != null ? parseInt(params['start_num']) : 1;
    end_num = params['end_num'] != null ? parseInt(params['end_num']) : 10;
    isExperimentalMode = Cookie.getCookie('is_experimental_mode');
    if (isExperimentalMode === 'true') {
      alert('Ready to search');
      $('#search_results').show();
      $('#other_search_results').show();
      exports.resume();
    } else {
      $('.relevance').hide();
    }
    $('#status').text('Search completed');
    url = '../../../logs/page_loaded/' + gon.userid + '/' + gon["interface"];
    return $.get(url, {
      search_string: gon.query,
      start_num: start_num,
      end_num: end_num
    }, json = function() {
      return console.log(url);
    });
  };

  getUrlVars = function() {
    var hash, hashes, i, vars, _i, _ref;
    vars = {};
    hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for (i = _i = 0, _ref = hashes.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
      hash = hashes[i].split('=');
      vars[hash[0]] = hash[1];
    }
    return vars;
  };

  $(document).ready(ready);

  $(document).on('page:load', ready);

}).call(this);
